<h1 class="text-2xl font-semibold mb-3">Datos del ni√±o üë∂üèª</h1>

<form
  [formGroup]="childProfileForm"
  (ngSubmit)="onSubmit()"
  class="flex flex-col gap-3"
>
  <!-- Nombre -->
  <div class="flex flex-col gap-2">
    <label for="name">Nombre <span class="required-asterisk">*</span></label>
    <input
      type="text"
      id="name"
      pInputText
      formControlName="name"
      placeholder="Nombre del ni√±o/a"
      [ngClass]="{
        'ng-invalid ng-dirty': f['name'].invalid && f['name'].touched
      }"
      [pAutoFocus]="true"
    />
    @if (f['name'].invalid && f['name'].dirty) {
    <p-message severity="error">
      @if (f['name'].errors?.['required']) { El nombre es obligatorio. }
    </p-message>
    }
  </div>

  <!-- Fecha de nacimiento -->
  <div class="flex flex-col gap-2">
    <label for="dob">
      Fecha de Nacimiento <span class="required-asterisk">*</span>
    </label>
    <p-calendar
      inputId="dob"
      formControlName="dob"
      [maxDate]="maxDate"
      [readonlyInput]="true"
      dateFormat="dd-mm-yy"
      [showIcon]="true"
      fluid
      [iconDisplay]="'input'"
      [ngClass]="{
        'ng-invalid ng-dirty': f['dob'].invalid && f['dob'].touched
      }"
    ></p-calendar>
    @if (f['dob'].invalid && f['dob'].dirty) {
    <p-message severity="error">
      @if (f['dob'].errors?.['required']) { La fecha de nacimiento es
      obligatoria. }
    </p-message>
    }
  </div>

  <!-- G√©nero -->
  <div class="flex flex-col gap-2">
    <label for="gender">G√©nero (Opcional)</label>
    <p-dropdown
      inputId="gender"
      formControlName="gender"
      [options]="genderOptions"
      optionLabel="label"
      optionValue="value"
      placeholder="Selecciona el g√©nero"
      [showClear]="true"
    ></p-dropdown>
  </div>

  <!-- Altura -->
  <div class="flex flex-col gap-2">
    <label for="heightCm">Altura (cm - Opcional)</label>
    <input
      type="number"
      id="heightCm"
      pInputText
      formControlName="heightCm"
      placeholder="Ej: 90"
      [ngClass]="{
        'ng-invalid ng-dirty': f['heightCm'].invalid && f['heightCm'].touched
      }"
    />
    @if (f['heightCm'].invalid && f['heightCm'].dirty) {
    <p-message severity="error">
      @if (f['heightCm'].errors?.['min'] || f['heightCm'].errors?.['max']) {
      Introduce una altura v√°lida (1-300 cm). }
    </p-message>
    }
  </div>

  <!-- Peso -->
  <div class="flex flex-col gap-2">
    <label for="weightKg">Peso (kg - Opcional)</label>
    <input
      type="number"
      step="0.1"
      id="weightKg"
      pInputText
      formControlName="weightKg"
      placeholder="Ej: 15.5"
      [ngClass]="{
        'ng-invalid ng-dirty': f['weightKg'].invalid && f['weightKg'].touched
      }"
    />
    @if (f['weightKg'].invalid && f['weightKg'].dirty) {
    <p-message severity="error">
      @if (f['weightKg'].errors?.['min'] || f['weightKg'].errors?.['max']) {
      Introduce un peso v√°lido (0.1-200 kg). }
    </p-message>
    }
  </div>

  <!-- Mensaje de error general -->
  @if (errorMessage) {
  <p-message severity="error">{{ errorMessage }}</p-message>
  }

  <p-button
    type="submit"
    label="Guardar perfil"
    styleClass="mt-5 w-full"
    [disabled]="childProfileForm.invalid"
    (click)="onSubmit()"
  />
</form>
