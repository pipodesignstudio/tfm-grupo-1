<div class="max-w-xl mx-auto p-6 rounded-2xl shadow-md bg-[#E6F7F9]">
  <h2 class="text-2xl font-bold text-center text-[#3A3A3A] mb-6">
    {{ editando ? 'Editar Rutina' : 'Crear Rutina' }}
  </h2>

  <form (ngSubmit)="guardarRutina()">
    <!-- Nombre -->
    <label class="block font-semibold text-[#3A3A3A] mb-1">Nombre de la Rutina</label>
    <input
      type="text"
      class="w-full p-3 mb-4 rounded-lg bg-[#C8E6F0] border border-[#9ED2C5] text-[#3A3A3A]"
      placeholder="Ej: Rutina Matutina"
      [(ngModel)]="rutina.nombre"
      name="nombre"
      required
    />

    <!-- Descripción -->
    <label class="block font-semibold text-[#3A3A3A] mb-1">Descripción</label>
    <textarea
      class="w-full p-3 mb-4 rounded-lg bg-[#C8E6F0] border border-[#9ED2C5] text-[#3A3A3A]"
      placeholder="Descripción de la rutina"
      [(ngModel)]="rutina.descripcion"
      name="descripcion"
    ></textarea>

    <!-- Frecuencia -->
    <label class="block font-semibold text-[#3A3A3A] mb-2">Días de la Semana</label>
    <div class="grid grid-cols-2 sm:grid-cols-3 gap-2 mb-6">
      @for (dia of diasSemana; track dia) {
        <label class="flex items-center gap-2 bg-white border border-[#9ED2C5] rounded-lg px-3 py-2">
          <input
            type="checkbox"
            [(ngModel)]="rutina.frecuencia[dia]"
            [name]="dia"
          />
          <span class="text-[#3A3A3A] font-medium">
            {{
              dia === 'lunes' ? 'Lunes' :
              dia === 'martes' ? 'Martes' :
              dia === 'miercoles' ? 'Miércoles' :
              dia === 'jueves' ? 'Jueves' :
              dia === 'viernes' ? 'Viernes' :
              dia === 'sabado' ? 'Sábado' :
              dia === 'domingo' ? 'Domingo' : dia
            }}
          </span>
        </label>
      }
    </div>

    <!-- Actividades seleccionadas -->
    <label class="block font-semibold text-[#3A3A3A] mb-2">Actividades</label>
    <div class="space-y-3 mb-4">
      @for (actividad of actividadesSeleccionadasConDatos; track actividad.id) {
        <div class="flex items-center justify-between bg-white p-3 rounded-xl border border-[#9ED2C5]">
          <span class="text-[#3A3A3A] font-medium">{{ actividad.titulo }}</span>
          <input
            type="time"
            class="ml-4 p-1 border border-[#9ED2C5] rounded-md"
            [(ngModel)]="horasActividades[actividad.id]"
            [attr.name]="'hora_' + actividad.id"
          />
          <button
            type="button"
            class="ml-4 text-red-500 text-sm hover:underline"
            (click)="eliminarActividad(actividad.id)">
            Eliminar
          </button>
        </div>
      }
      @empty {
        <div class="text-gray-400 text-center">No hay actividades añadidas.</div>
      }
    </div>

    <!-- Agregar actividad -->
    <div class="mb-6">
      <button
      type="button"
      (click)="agregarActividad()"
      class="text-sm text-[#FF7F50] hover:underline font-semibold"
      [disabled]="actividadesDisponibles.length === actividadesSeleccionadas.length"
    >
      + Agregar Actividad
    </button>
    
    </div>

    <!-- Botones -->
    <div class="flex flex-col sm:flex-row justify-center gap-4">
      <button
        type="submit"
        class="px-6 py-2 rounded-lg text-white bg-[#FF7F50] hover:opacity-90"
      >
        Guardar
      </button>
      <button
        type="button"
        (click)="cancelar()"
        class="px-6 py-2 rounded-lg text-[#3A3A3A] bg-gray-200 hover:bg-gray-300"
      >
        Cancelar
      </button>
    </div>
  </form>
</div>
