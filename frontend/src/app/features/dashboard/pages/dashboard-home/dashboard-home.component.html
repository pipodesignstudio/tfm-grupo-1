<div class="p-4 space-y-6 max-w-xl mx-auto">
  <div class="flex flex-col items-start">
    <h1 class="text-2xl font-bold">
      Â¡Hola Paula!
      <!--{{ user.name }}!-->
    </h1>
    <span class="text-gray-500"
      >Lunes, 20 mayo 2025<!--{{ date | date : "fullDate" }}--></span
    >
  </div>

  <!-- Card -->
  <div class="relative flex items-center">
    <!-- Left button: disabled if only one child -->
    <button
      class="bg-primary-100 p-2 rounded-full shadow mr-2 disabled:opacity-50"
      (click)="previousChild()"
      [disabled]="children.length <= 1"
      aria-label="Previous child"
    >
      <i class="pi pi-chevron-left"></i>
    </button>

    <!-- routine -->
    <div class="flex-1">
      <div class="card-secondary">
        <img
          [src]="children[activeChild].photoUrl"
          [alt]="children[activeChild].name + ' photo'"
          class="w-24 h-24 rounded-full object-cover mb-4 shadow mx-auto"
        />

        <h2 class="text-lg font-semibold mb-2">
          Rutina de {{ children[activeChild].name }}
        </h2>
        <ul class="w-full space-y-2">
          @for (task of children[activeChild].routine; track $index) {
          <li
            class="flex items-center px-3 py-2 rounded-lg shadow-sm transition-all duration-300 group"
            [ngClass]="getTaskBgClass(task.type)"
            [class.opacity-60]="task.completed"
            [@fadeIn]
          >
            <!-- Checkbox -->
            <input
              type="checkbox"
              class="mr-3 accent-green-500"
              [checked]="task.completed"
              (change)="toggleTaskComplete(task)"
              aria-label="Marcar como completada"
            />
            <!-- Emoji -->
            <span class="text-2xl mr-3">
              @if (task.icon.startsWith('pi')) {
              <i [class]="task.icon + ' text-xl text-primary-600'"></i>
              } @else {
              {{ task.icon }}
              }
            </span>
            <!-- Nombre de la tarea -->
            <span
              class="flex-1 text-gray-900"
              [class.line-through]="task.completed"
            >
              {{ task.label }}
            </span>
            <!-- Hora -->
            <span class="font-mono text-sm text-gray-700 w-14 text-right ml-3">
              {{ task.time }}
            </span>
          </li>
          }
        </ul>
      </div>
    </div>
    <!-- Right button: disabled if only one child -->
    <button
      class="bg-primary-100 p-2 rounded-full shadow ml-2 disabled:opacity-50"
      (click)="nextChild()"
      [disabled]="children.length <= 1"
      aria-label="Next child"
    >
      <i class="pi pi-chevron-right"></i>
    </button>
  </div>

  <!-- Enlaces directos -->
  <div class="grid grid-cols-2 gap-4 md:grid-cols-4">
    <a
      class="bg-primary-50 hover:bg-primary-100 rounded-xl p-4 flex flex-col items-center shadow transition"
      routerLink="/routines"
    >
      <i class="pi pi-list text-2xl mb-2 text-primary-600"></i>
      <span>Rutinas</span>
    </a>
    <a
      class="bg-primary-50 hover:bg-primary-100 rounded-xl p-4 flex flex-col items-center shadow transition"
      routerLink="/goals"
    >
      <i class="pi pi-star text-2xl mb-2 text-primary-600"></i>
      <span>Objetivos</span>
    </a>
    <a
      class="bg-primary-50 hover:bg-primary-100 rounded-xl p-4 flex flex-col items-center shadow transition"
      routerLink="/calendar"
    >
      <i class="pi pi-calendar text-2xl mb-2 text-primary-600"></i>
      <span>Calendario</span>
    </a>
    <a
      class="bg-primary-50 hover:bg-primary-100 rounded-xl p-4 flex flex-col items-center shadow transition"
      routerLink="/notes"
    >
      <i class="pi pi-pencil text-2xl mb-2 text-primary-600"></i>
      <span>Notas</span>
    </a>
  </div>
</div>
