<div
  class="fixed inset-0 backdrop-blur-xs flex items-center justify-center z-50"
>
  <div
    class="bg-white rounded-2xl shadow-lg w-[90%] max-w-md max-h-[90vh] flex flex-col p-6 overflow-hidden"
  >
    <!-- Título fijo -->
    <h2 class="text-xl font-semibold text-gray-800 mb-4 shrink-0">

      @if(editMode) {
        Editar {{tipo}} {{actividadInfo?.titulo || ''}}
      } 
      @else {
        Crear {{tipo}}
      }

    </h2>

    <!-- Contenido con scroll -->
    <form
      [formGroup]="form"
      (ngSubmit)="onSubmit()"
      class="flex flex-col gap-4 overflow-y-auto grow pr-1 scroll-invisible"
    >
      <input
        type="text"
        placeholder="Título"
        pInputText
        formControlName="titulo"
        class="p-3 rounded-md"
      />
      <div>
        <textarea
          placeholder="Descripción"
          pTextarea
          formControlName="descripcion"
          class="p-3 rounded-md w-full h-24"
        ></textarea>
      </div>
      <p-select
        [options]="filtroOpciones"
        formControlName="nino_id"
        [optionValue]="'value'"
        optionLabel="label"
        placeholder="Filtrar por niño o actividad"
      ></p-select>
      <div class="flex ">
        <span class="flex items-center justify-center"
          >Fecha de realización:</span
        >
        <p-datepicker
          formControlName="fecha_realizacion"
          class="border-0 rounded-md"
          [iconDisplay]="'input'"
          [appendTo]="'body'"
          [showIcon]="true"
        ></p-datepicker>
      </div>
      <div class="flex justify-between align-middle">
        <span class="flex items-center justify-center">Hora de inicio:</span>
        <p-datepicker
          [iconDisplay]="'input'"
          [timeOnly]="true"
          formControlName="hora_inicio"
          class="border-0 rounded-md"
        />
      </div>
      <div class="flex justify-between align-middle">
        <span class="flex items-center justify-center">Hora de fin:</span>
        <p-datepicker
          [iconDisplay]="'input'"
          [timeOnly]="true"
          formControlName="hora_fin"
          class="border-0 rounded-md"
        />
      </div>
      <p-select
        [options]="usuariosResponsables"
        formControlName="usuario_responsable"
        optionLabel="label"
        [optionValue]="'value'"
        placeholder="Responsable"
      ></p-select>
      @if(tipo === 'evento') {
        <div>
        <span>Seleccione color del evento:</span>

        <p-colorpicker
          formControlName="color"
          [inline]="isMobile"
          class="w-full h-12 border-0 rounded-md p-1"
        ></p-colorpicker>
      </div>
      }
      
      <app-ubicacion formControlName="ubicacion"></app-ubicacion>
      <div class="flex justify-end gap-2 mt-4 shrink-0">
        <button
          type="button"
          (click)="cerrarModal()"
          class="px-4 py-2 rounded-md bg-gray-200 text-gray-700 hover:bg-gray-300"
        >
          Cancelar
        </button>
        <button
          type="submit"
          [disabled]="form.invalid"
          class="px-4 py-2 rounded-md text-white bg-purple-500 hover:bg-purple-600 disabled:bg-gray-300 disabled:text-gray-500 disabled:cursor-not-allowed"
        >
          Guardar
        </button>
      </div>
    </form>

    <!-- Botones fijos -->
  </div>
</div>
